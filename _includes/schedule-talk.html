{%- for item in site.talks -%}
  {% if item['i18n-key'] == include.value and item.locale == include.locale %}
      {% assign talk = item %}
      {% assign locale = talk.locale %}
      {% assign nb = include.nb | default: 0 %}
  {% endif %}
{%- endfor -%}
{% assign roomIndex = include.roomIndex | default: forloop.index0 %}
<td scope="col" class="schedule-talk">
  <a href="{{ talk.url }}" class="talk room{{ forloop.index | plus: nb }}" id="{{ talk.slug }}">
    <header>
      {%- for speakerSlug in talk.speakers -%}
        {% assign speaker = site.data.speakers[include.year][speakerSlug] %}
        <figure class="person person-{{ talk.speakers | size }} {{ speaker.slug }}">
          {% cloudinary avatar {{ speaker.image | relative_url }} class="person-avatar" alt="" loading="lazy" %}
        </figure>
      {%- endfor -%}
      <div class="talk-summary speakers-{{ talk.speakers | size }}">
        <h2>{{ talk.title }}</h2>
        <p class="talk-authors">
          {% if talk.talk_locale %}{% unless talk.talk_locale == include.locale %}<strong>{{ " en anglais" | t: page.locale }}</strong>{% endunless %}{% endif %}
          {%- for speakerSlug in talk.speakers -%}
            {%- capture youString %}{{ "VousÂ !" | t: page.locale }}{% endcapture -%}
            {% assign speaker = site.data.speakers[include.year][speakerSlug] %}
            {% if forloop.first %} {%t par %} {{ speaker.name | default: youString }}{% else %}{{ speaker.name | default: youString }}{% endif %}
            {% if speaker.locale %}{% unless speaker.locale == include.locale %}<strong>{{ " en anglais" | t: page.locale }}</strong>{% endunless %}{% endif %}
            {% unless forloop.last -%}, {%- endunless -%}
          {%- endfor -%}{% if talk.length %}<br><span aria-hidden="true">ðŸ•‘</span> {{talk.length}} minutes{% if talk.questions %} + questions{% endif %}{% endif %}<span class="schedule-room">{{ rooms[roomIndex][include.locale] }}</span>
        </p>
      </div>
    </header>
    <section class="talk-excerpt">
      {% assign localizedTalk = talk[include.locale] %}
      <p>{{ localizedTalk.excerpt | default:localizedTalk.description | truncatewords: 40 }}</p><p>{% if localizedTalk.cta -%}
        <span class="underlined">{{ localizedTalk.cta.name }}</span> | {% endif %} <span class="underlined">{% t En savoir plus %}</span</p>
    </section>
  </a>
</td>
